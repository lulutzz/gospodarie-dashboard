<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>MQTT TEST</title>

    <!-- Biblioteca MQTT funcțională -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/mqttws31.min.js"></script>

</head>
<body style="background:black;color:#0f0;font-family:monospace">

<h2>MQTT Test</h2>
<pre id="log"></pre>

<script>
function log(txt){
    document.getElementById("log").textContent += txt + "\n";
}

const HOST = "c72cc38c1f184d0199cc4daa938bac6f.s1.eu.hivemq.cloud";
const PORT = 8884;
const PATH = "/mqtt";
const USER = "burlusi";
const PASS = "Burlusi166?";
const ID   = "WEB_TEST_" + Math.random().toString(16).substr(2,6);

log("Loading MQTT...");

let client = new Paho.MQTT.Client(HOST, PORT, PATH, ID);

client.onConnectionLost = () => log("!! Connection lost");
client.onMessageArrived = (msg) => log("MSG: " + msg.destinationName + " = " + msg.payloadString);

client.connect({
    useSSL: true,
    userName: USER,
    password: PASS,
    cleanSession: true,
    timeout: 5,
    onSuccess: () => {
        log("✔ CONNECTED");
        client.subscribe("/gosp/+/status");
        log("Subscribed");
    },
    onFailure: (e) => log("ERR: " + e.errorMessage)
});
</script>

</body>
</html>
